---
# Configuration Example: Automatic API Version Detection
#
# Use this configuration when:
# - You want the exporter to automatically detect the NetBackup API version
# - You're deploying across multiple NetBackup versions
# - You want a single configuration that works with NetBackup 10.0, 10.5, and 11.0
# - You're upgrading NetBackup and want the exporter to adapt automatically
#
# NetBackup Version: 10.0+ (any supported version)
# API Version: Auto-detected (13.0 → 12.0 → 3.0)
# Detection: Enabled (no apiVersion specified)

server:
    host: "localhost"
    port: "2112"
    uri: "/metrics"
    scrapingInterval: "1h"  # Time window for job collection (e.g., "30m", "1h", "2h")
    logName: "log/nbu-exporter.log"

nbuserver:
    scheme: "https"
    uri: "/netbackup"
    domain: "my.domain"
    domainType: "NT"
    host: "nbu-master.my.domain"  # NetBackup master server (any version 10.0+)
    port: "1556"
    # apiVersion: NOT SPECIFIED - Will auto-detect highest supported version
    # Detection order: 13.0 (NBU 11.0) → 12.0 (NBU 10.5) → 3.0 (NBU 10.0-10.4)
    apiKey: "your-api-key-here"  # Generate from NetBackup UI
    contentType: "application/vnd.netbackup+json; version=3.0"
    insecureSkipVerify: false  # Set to true only for testing environments

# Version Detection Behavior:
# 
# The exporter will attempt to connect using API versions in this order:
# 1. API 13.0 (NetBackup 11.0+)
# 2. API 12.0 (NetBackup 10.5)
# 3. API 3.0 (NetBackup 10.0-10.4)
#
# The first version that responds successfully will be used for all subsequent requests.
#
# Startup Log Example:
#   INFO[0000] Starting NBU Exporter
#   INFO[0001] Attempting API version detection
#   DEBUG[0001] Trying API version 13.0
#   INFO[0002] Detected NetBackup API version: 13.0
#   INFO[0002] Successfully connected to NetBackup API
#
# Detection adds 1-3 seconds to startup time (one lightweight API call per version attempt).
# For faster startup, specify an explicit apiVersion.

# Notes:
# - Replace "your-api-key-here" with your actual NetBackup API key
# - Replace "nbu-master.my.domain" with your NetBackup master server hostname
# - Adjust scrapingInterval based on your monitoring needs
# - Keep insecureSkipVerify: false for production environments
# - This configuration works with NetBackup 10.0, 10.5, and 11.0 without changes
